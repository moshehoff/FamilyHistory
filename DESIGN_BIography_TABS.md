# Design: Biography Tabs with Nested Chapter Tabs

## ×”××‘× ×” ×”×¨×¦×•×™ (Visual Design)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ×¢××•×“ ×¤×¨×•×¤×™×œ                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [ğŸ“– Biography]  [ğŸ–¼ï¸ Gallery]                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Biography Tab Content (active):                      â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“‹ ×¤×¨×˜×™ ×”×¤×¨×•×¤×™×œ:                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ Birth: 1884                                 â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Death: 1973                                 â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Parents: ...                                â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Spouse: ...                                 â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Children: ...                               â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“Š ×“×™××’×¨××•×ª:                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ Family Tree (Mermaid)                       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Descendants (Mermaid)                      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Ancestors (Mermaid)                        â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ Nuclear Family (Mermaid)                   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ“š ×‘×™×•×’×¨×¤×™×” ××•×¨×—×‘×ª:                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ [ğŸ“– Introduction] [ğŸ“„ Chapter 1] [ğŸ“„ Ch 2]   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚                                             â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  ×ª×•×›×Ÿ ×”×¤×¨×§ ×”× ×‘×—×¨ (Introduction/Chapter 1/2) â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                                             â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Gallery Tab Content (hidden when Biography active): â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  ğŸ–¼ï¸ ×ª××•× ×•×ª ×•××¡××›×™× ×‘×œ×‘×“                              â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ×¢×§×¨×•× ×•×ª ×¢×™×¦×•×‘

1. **×˜××‘×™× ×¨××©×™×™×**: Biography (active) | Gallery
2. **×‘×ª×•×š ×˜××‘ Biography**:
   - ×¤×¨×˜×™ ×”×¤×¨×•×¤×™×œ (Birth, Death, Parents, Spouse, Children) - **×‘×ª×—×™×œ×”**
   - ×“×™××’×¨××•×ª (Mermaid) - **××—×¨×™ ×”×¤×¨×˜×™×**
   - ×˜××‘×™× ××©× ×™×™× ×œ×¤×¨×§×™× - **××—×¨×™ ×”×“×™××’×¨××•×ª**
   - ×ª×•×›×Ÿ ×”×¤×¨×§ ×”× ×‘×—×¨ - **×ª×—×ª ×”×˜××‘×™× ×”××©× ×™×™×**

3. **Gallery Tab**: ×¨×§ ×ª××•× ×•×ª ×•××¡××›×™×

## ×©×™× ×•×™×™× × ×“×¨×©×™× ×‘×§×•×“

### 1. `site/quartz.layout.ts`

**×©×™× ×•×™**: ×”×¢×‘×¨×ª `ProfileTabs` ×-`beforeBody` ×œ-`afterBody`

**×œ××”**: 
- `ProfileTabs` ×¦×¨×™×š ×œ×”×•×¤×™×¢ ××—×¨×™ ×”-`article` (×©××›×™×œ ××ª ×”×¤×¨×˜×™× ×•×”×“×™××’×¨××•×ª)
- ××—×¨ ×›×š × ×–×™×– ××ª ×”×ª×•×›×Ÿ ××”-`article` ×œ×˜××‘ Biography ×‘×××¦×¢×•×ª JavaScript

**×§×•×“**:
```typescript
// ×œ×¤× ×™:
export const defaultContentPageLayout: PageLayout = {
  beforeBody: [
    ...
    Component.ProfileTabs(),  // â† ×›××Ÿ
  ],
  ...
}

// ××—×¨×™:
export const sharedPageComponents: SharedLayout = {
  ...
  afterBody: [
    Component.ConditionalRender({
      component: Component.ProfileTabs(),
      condition: (page) => page.fileData.frontmatter?.type === "profile",
    }),
  ],
  ...
}

export const defaultContentPageLayout: PageLayout = {
  beforeBody: [
    ...
    // ProfileTabs ×”×•×¢×‘×¨ ×œ-afterBody
  ],
  ...
}
```

---

### 2. `site/quartz/components/ProfileTabs.tsx`

#### 2.1. ×”×¢×‘×¨×ª ProfileTabs ×œ-article

**×œ××”**: `ProfileTabs` ××•×¤×™×¢ ×‘-`afterBody` (××—×¨×™ ×”-article), ××‘×œ ×× ×—× ×• ×¨×•×¦×™× ×©×”×•× ×™×”×™×” ×‘×ª×•×š ×”-article ×›×“×™ ×©× ×•×›×œ ×œ×”×¢×‘×™×¨ ××ª ×”×ª×•×›×Ÿ ××œ×™×•.

**×§×•×“**:
```javascript
// ×‘×¤×•× ×§×¦×™×” initProfileTabs()
function moveProfileTabsToArticle() {
  const profileTabs = document.querySelector('.profile-tabs');
  const article = document.querySelector('article');
  
  if (profileTabs && article && profileTabs.parentElement !== article) {
    article.appendChild(profileTabs);
  }
}
```

#### 2.2. ×”×¢×‘×¨×ª ×¤×¨×˜×™× ×•×“×™××’×¨××•×ª ×œ×˜××‘ Biography

**×œ××”**: 
- ×”×¤×¨×˜×™× ×•×”×“×™××’×¨××•×ª × ××¦××™× ×‘-`article` (××—×•×¥ ×œ×˜××‘×™×)
- ×× ×—× ×• ×¨×•×¦×™× ×©×”× ×™×”×™×• ×‘×ª×•×š ×˜××‘ Biography
- ×¦×¨×™×š ×œ××™×™×Ÿ ××•×ª× ×›×š ×©×¤×¨×˜×™× ×™×•×¤×™×¢×• ×œ×¤× ×™ ×“×™××’×¨××•×ª

**×§×•×“**:
```javascript
function moveContentToBiographyTab() {
  const profileTabs = document.querySelector('.profile-tabs');
  const biographyPane = document.querySelector('[data-tab-content="biography"]');
  const article = document.querySelector('article');
  
  // 1. ×”×¢×‘×¨×ª ProfileTabs ×œ-article
  if (profileTabs.parentElement !== article) {
    article.appendChild(profileTabs);
  }
  
  // 2. ××™×¡×•×£ ×›×œ ×”×ª×•×›×Ÿ ×œ×¤× ×™ ProfileTabs
  const articleChildren = Array.from(article.children);
  let profileTabsIndex = articleChildren.indexOf(profileTabs);
  
  if (profileTabsIndex > 0) {
    const elementsToMove = articleChildren.slice(0, profileTabsIndex);
    
    // 3. ××™×•×Ÿ: ×¤×¨×˜×™× â†’ ×“×™××’×¨××•×ª
    const profileInfoElements = [];
    const diagramElements = [];
    const otherElements = [];
    
    elementsToMove.forEach(function(element) {
      const tagName = element.tagName ? element.tagName.toLowerCase() : '';
      
      // ×–×™×”×•×™ ×¤×¨×˜×™× (dl = definition list)
      if (tagName === 'dl' || element.querySelector('dl')) {
        profileInfoElements.push(element);
      }
      // ×–×™×”×•×™ ×“×™××’×¨××•×ª (h2 ××• code ×¢× mermaid)
      else if (tagName === 'h2' || 
               element.querySelector('.mermaid') || 
               element.querySelector('code.language-mermaid')) {
        diagramElements.push(element);
      }
      else {
        otherElements.push(element);
      }
    });
    
    // 4. ×”×¢×‘×¨×” ×‘×¡×“×¨: ×¤×¨×˜×™× â†’ ××—×¨ â†’ ×“×™××’×¨××•×ª
    const sortedElements = profileInfoElements.concat(otherElements).concat(diagramElements);
    sortedElements.forEach(function(element) {
      biographyPane.insertBefore(element, biographyPane.firstChild);
    });
  }
}
```

#### 2.3. ×™×¦×™×¨×ª ×˜××‘×™× ××©× ×™×™× (×¤×¨×§×™×) ×‘×ª×•×š ×˜××‘ Biography

**×œ××”**: 
- ×”×˜××‘×™× ×”××©× ×™×™× ×¦×¨×™×›×™× ×œ×”×•×¤×™×¢ **××—×¨×™** ×”×¤×¨×˜×™× ×•×”×“×™××’×¨××•×ª
- ×”× ×¦×¨×™×›×™× ×œ×”×™×•×ª **×‘×ª×•×š** ×˜××‘ Biography, ×œ× ×‘×¨××” ×”×¢×œ×™×•× ×”

**×§×•×“**:
```javascript
function createChapterTabs(chapters) {
  const biographyPane = document.querySelector('[data-tab-content="biography"]');
  
  // ×™×¦×™×¨×ª ××‘× ×” ×”×˜××‘×™× ×”××©× ×™×™×
  const chapterTabsContainer = document.createElement('div');
  chapterTabsContainer.className = 'chapter-tabs-container';
  
  const chapterTabsHeader = document.createElement('div');
  chapterTabsHeader.className = 'chapter-tabs-header';
  
  const chapterTabsContent = document.createElement('div');
  chapterTabsContent.className = 'chapter-tabs-content';
  
  // ×”×•×¡×¤×ª ×˜××‘ Introduction (×× ×§×™×™×)
  if (chapters.main) {
    // ×™×¦×™×¨×ª ×›×¤×ª×•×¨ ×˜××‘
    const mainButton = document.createElement('button');
    mainButton.className = 'chapter-tab-button active';
    mainButton.setAttribute('data-chapter-slug', chapters.main.slug);
    mainButton.textContent = 'ğŸ“– Introduction';
    chapterTabsHeader.appendChild(mainButton);
    
    // ×™×¦×™×¨×ª ×ª×•×›×Ÿ ×˜××‘
    const mainPane = document.createElement('div');
    mainPane.className = 'chapter-tab-pane active';
    mainPane.setAttribute('data-chapter-slug', chapters.main.slug);
    mainPane.innerHTML = '<div class="loading-message">Loading chapter...</div>';
    chapterTabsContent.appendChild(mainPane);
  }
  
  // ×”×•×¡×¤×ª ×˜××‘×™× ×œ×¤×¨×§×™×
  chapters.chapters.forEach(function(chapter) {
    // ×™×¦×™×¨×ª ×›×¤×ª×•×¨ ×˜××‘
    const chapterButton = document.createElement('button');
    chapterButton.className = 'chapter-tab-button';
    chapterButton.setAttribute('data-chapter-slug', chapter.slug);
    chapterButton.textContent = 'ğŸ“„ ' + chapter.title;
    chapterTabsHeader.appendChild(chapterButton);
    
    // ×™×¦×™×¨×ª ×ª×•×›×Ÿ ×˜××‘
    const chapterPane = document.createElement('div');
    chapterPane.className = 'chapter-tab-pane';
    chapterPane.setAttribute('data-chapter-slug', chapter.slug);
    chapterPane.innerHTML = '<div class="loading-message">Loading chapter...</div>';
    chapterTabsContent.appendChild(chapterPane);
  });
  
  // ×—×™×‘×•×¨ ×”×›×œ
  chapterTabsContainer.appendChild(chapterTabsHeader);
  chapterTabsContainer.appendChild(chapterTabsContent);
  
  // ×”×•×¡×¤×” ×œ×¡×•×£ ×˜××‘ Biography (××—×¨×™ ×”×¤×¨×˜×™× ×•×”×“×™××’×¨××•×ª)
  biographyPane.appendChild(chapterTabsContainer);
}
```

#### 2.4. ×˜×¢×™× ×ª ×ª×•×›×Ÿ ×”×¤×¨×§×™×

**×œ××”**: 
- ×”×¤×¨×§×™× × ××¦××™× ×‘-`/static/chapters/{profileId}/{filename}.md`
- ×¦×¨×™×š ×œ×˜×¢×•×Ÿ ××•×ª× ×“×™× ××™×ª ×•×œ×”×¦×™×’ ××•×ª× ×‘×˜××‘ ×”××ª××™×
- ×¦×¨×™×š ×œ×”×©×ª××© ×‘-`filename` ×-`chapters-index.json`, ×œ× ×‘-`slug`

**×§×•×“**:
```javascript
function loadChapter(chapterSlug) {
  // ××¦×™××ª ×©× ×”×§×•×‘×¥ ×-chaptersData
  var chapterFilename = null;
  if (chaptersData) {
    if (chaptersData.main && chaptersData.main.slug === chapterSlug) {
      chapterFilename = chaptersData.main.filename;
    } else {
      for (var i = 0; i < chaptersData.chapters.length; i++) {
        if (chaptersData.chapters[i].slug === chapterSlug) {
          chapterFilename = chaptersData.chapters[i].filename;
          break;
        }
      }
    }
  }
  
  // ×˜×¢×™× ×ª ×”×§×•×‘×¥
  const chapterPath = '/static/chapters/' + profileId + '/' + chapterFilename;
  fetch(chapterPath)
    .then(function(response) {
      if (!response.ok) throw new Error('Chapter not found');
      return response.text();
    })
    .then(function(content) {
      // ×”××¨×ª Markdown ×œ-HTML
      const html = parseMarkdownToHTML(content, chaptersData);
      displayChapter(chapterSlug, html);
    });
}
```

#### 2.5. ××ª×—×•×œ ××—×“×© ×©×œ ×“×™××’×¨××•×ª Mermaid

**×œ××”**: 
- ×”×“×™××’×¨××•×ª × ×˜×¢× ×•×ª ×‘-Quartz ×œ×¤× ×™ ×©×”×¢×‘×¨× ×• ××•×ª×Ÿ ×œ×˜××‘
- ××—×¨×™ ×”×¢×‘×¨×” ×œ×˜××‘, ×¦×¨×™×š ×œ××ª×—×œ ××•×ª×Ÿ ××—×“×©

**×§×•×“**:
```javascript
// ××—×¨×™ ×”×¢×‘×¨×ª ×”×ª×•×›×Ÿ ×œ×˜××‘ Biography
setTimeout(function() {
  if (window.mermaid) {
    const mermaidElements = biographyPane.querySelectorAll('.mermaid, code.language-mermaid');
    mermaidElements.forEach(function(element) {
      // ×× ×–×” code block, ×”××¨ ×œ-div
      if (element.tagName === 'code') {
        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = element.textContent;
        element.parentElement.replaceChild(mermaidDiv, element);
        window.mermaid.init(undefined, mermaidDiv);
      } else {
        window.mermaid.init(undefined, element);
      }
    });
  }
}, 500);
```

#### 2.6. ×”×¡×¨×ª ×˜×§×¡×˜ placeholder

**×œ××”**: 
- `doit.py` ××•×¡×™×£ ×˜×§×¡×˜ "Biography chapters will be loaded here" ×›×©×™×© ×¤×¨×§×™×
- ×”×˜×§×¡×˜ ×”×–×” ××™×•×ª×¨ ×›×™ ×”×¤×¨×§×™× × ×˜×¢× ×™× ×“×™× ××™×ª

**×§×•×“**:
```javascript
// ×”×¡×¨×ª placeholder text ××”-article ×œ×¤× ×™ ×”×¢×‘×¨×”
elementsToMove.forEach(function(element) {
  if (element.tagName === 'p' && 
      element.textContent.includes('chapters will be loaded')) {
    element.remove();
  }
  if (element.tagName === 'h2' && 
      element.textContent.trim() === 'Biography') {
    const nextSibling = element.nextElementSibling;
    if (nextSibling && nextSibling.textContent.includes('chapters will be loaded')) {
      nextSibling.remove();
    }
    element.remove();
  }
});
```

---

### 3. `scripts/doit.py`

**×©×™× ×•×™**: ×”×¡×¨×ª ×”×˜×§×¡×˜ "Biography chapters will be loaded here"

**×œ××”**: ×”×˜×§×¡×˜ ×”×–×” ××™×•×ª×¨ ×›×™ ×”×¤×¨×§×™× × ×˜×¢× ×™× ×“×™× ××™×ª ×“×¨×š JavaScript

**×§×•×“**:
```python
# ×œ×¤× ×™:
if has_chapters:
    lines += ["", "---", "", "## Biography", "", "Biography chapters will be loaded here."]

# ××—×¨×™:
if has_chapters:
    lines += ["", "---", "", "## Biography"]
```

---

### 4. CSS - `site/quartz/components/ProfileTabs.tsx`

**×©×™× ×•×™**: ×”×•×¡×¤×ª CSS ×œ×˜××‘×™× ×”××©× ×™×™× (×¤×¨×§×™×)

**×œ××”**: ×”×˜××‘×™× ×”××©× ×™×™× ×¦×¨×™×›×™× ×¢×™×¦×•×‘ × ×¤×¨×“ ××”×˜××‘×™× ×”×¨××©×™×™×

**×§×•×“**:
```css
/* Chapter tabs (nested inside biography tab) */
.chapter-tabs-container {
  margin: 2rem 0;
}

.chapter-tabs-header {
  display: flex;
  gap: 0.5rem;
  border-bottom: 2px solid var(--lightgray);
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.chapter-tab-button {
  padding: 0.5rem 1rem;
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--gray);
  transition: all 0.3s ease;
  
  &:hover {
    color: var(--darkgray);
    background: var(--lightgray);
  }
  
  &.active {
    color: var(--secondary);
    border-bottom-color: var(--secondary);
  }
}

.chapter-tabs-content {
  .chapter-tab-pane {
    display: none;
    animation: fadeIn 0.3s ease;
    
    &.active {
      display: block;
    }
  }
}
```

---

## ×¡×“×¨ ×”×‘×™×¦×•×¢

1. **×”×¢×‘×¨×ª ProfileTabs ×œ-article** (100ms delay)
2. **×”×¢×‘×¨×ª ×¤×¨×˜×™× ×•×“×™××’×¨××•×ª ×œ×˜××‘ Biography** (100ms delay)
3. **×™×¦×™×¨×ª ×˜××‘×™× ××©× ×™×™× (×¤×¨×§×™×)** (200ms delay - ××—×¨×™ ×©×”×ª×•×›×Ÿ ×”×•×¢×‘×¨)
4. **×˜×¢×™× ×ª ×¤×¨×§ ×¨××©×•× ×™** (300ms delay)
5. **××ª×—×•×œ ××—×“×© ×©×œ ×“×™××’×¨××•×ª Mermaid** (500ms delay)

---

## ×¡×™×›×•× ×”×©×™× ×•×™×™×

| ×§×•×‘×¥ | ×©×™× ×•×™ | ×œ××” |
|------|-------|-----|
| `quartz.layout.ts` | ×”×¢×‘×¨×ª ProfileTabs ×œ-afterBody | ×›×“×™ ×©×™×•×¤×™×¢ ××—×¨×™ article |
| `ProfileTabs.tsx` | ×”×¢×‘×¨×ª ProfileTabs ×œ-article | ×›×“×™ ×©× ×•×›×œ ×œ×”×¢×‘×™×¨ ×ª×•×›×Ÿ ××œ×™×• |
| `ProfileTabs.tsx` | ×”×¢×‘×¨×ª ×¤×¨×˜×™× ×•×“×™××’×¨××•×ª ×œ×˜××‘ Biography | ×›×“×™ ×©×™×”×™×• ×‘×ª×•×š ×”×˜××‘ |
| `ProfileTabs.tsx` | ×™×¦×™×¨×ª ×˜××‘×™× ××©× ×™×™× (×¤×¨×§×™×) | ×›×“×™ ×©×™×•×¤×™×¢×• ×‘×ª×•×š ×˜××‘ Biography |
| `ProfileTabs.tsx` | ×˜×¢×™× ×ª ×ª×•×›×Ÿ ×¤×¨×§×™× | ×›×“×™ ×œ×”×¦×™×’ ××ª ×”×¤×¨×§×™× |
| `ProfileTabs.tsx` | ××ª×—×•×œ ××—×“×© ×©×œ Mermaid | ×›×“×™ ×©×”×“×™××’×¨××•×ª ×™×¢×‘×“×• ××—×¨×™ ×”×¢×‘×¨×” |
| `ProfileTabs.tsx` | ×”×¡×¨×ª placeholder text | ×›×“×™ ×œ×”×¡×™×¨ ×˜×§×¡×˜ ××™×•×ª×¨ |
| `doit.py` | ×”×¡×¨×ª "Biography chapters will be loaded here" | ×›×™ ×”×¤×¨×§×™× × ×˜×¢× ×™× ×“×™× ××™×ª |
| `ProfileTabs.tsx` | CSS ×œ×˜××‘×™× ××©× ×™×™× | ×›×“×™ ×©×™×”×™×• ××¢×•×¦×‘×™× × ×›×•×Ÿ |

---

## ×”×× ×œ××©×¨ ××ª ×”-design ×”×–×”?

×× ××ª×” ×××©×¨, ×× ×™ ××ª×—×™×œ ×œ×™×™×©× ××ª ×›×œ ×”×©×™× ×•×™×™× ×œ×¤×™ ×”×¡×“×¨.

