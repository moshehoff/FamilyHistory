# 🌳 עץ משפחתי גדול - הושלם!

## ✅ מה יושם:

### 1. יצירת family-data.json אוטומטית
**בקובץ**: `scripts/doit.py`

כל פעם שמריצים `doit.py`, נוצר אוטומטית:
```
site/quartz/static/family-data.json
```

**מכיל:**
- כל 21 האנשים במשפחה (או 546 בGEDCOM המלא)
- כל 24 המשפחות (יחסי נישואין)
- קישורים בין הורים לילדים

**דוגמה:**
```json
{
  "people": [
    {
      "id": "I1",
      "name": "Dr PETER פנחס HOFFMAN",
      "birth_date": "November 28, 1946",
      "death_date": "December 28, 2024",
      "famc": "F2",
      "fams": ["F1"]
    },
    ...
  ],
  "families": [
    {
      "id": "F1",
      "husband": "I1",
      "wife": "I9",
      "children": ["I4", "I5", "I6"]
    },
    ...
  ]
}
```

### 2. רכיב עץ דינמי
**בקובץ**: `site/quartz/components/FamilyTreeLarge.tsx`

**תכונות:**
- ✅ **טעינה דינמית** מ-`/family-data.json`
- ✅ **יצירת Mermaid אוטומטית** לכל המשפחה
- ✅ **הדגשת פרופיל נבחר** (צהוב!)
- ✅ **קישורים לחיצים** לכל קודקוד
- ✅ **פקדי זום** (+/-)
- ✅ **בחירת דורות** (2-5 או הכל)

### 3. אינטגרציה
- העץ מוצג **בפריים הימני** (40%)
- **Sticky position** - נשאר למעלה בגלילה
- **סינכרון אוטומטי** - הפרופיל הנוכחי מודגש

---

## 🎯 איך זה עובד:

### שלב 1: הרצת doit.py
```powershell
python scripts/doit.py data/tree.ged -o site/content/profiles
```

**יוצר:**
1. 546 פרופילים ב-`site/content/profiles/People/`
2. `family-data.json` ב-`site/quartz/static/`

### שלב 2: הרצת Quartz
```powershell
cd site
npx quartz build --serve
```

Quartz מגיש את `family-data.json` ב-`/family-data.json`

### שלב 3: בדפדפן
כשנכנסים לפרופיל:
1. FamilyTreeLarge טוען את `/family-data.json`
2. מייצר דיאגרמת Mermaid מכל הנתונים
3. מדגיש את הפרופיל הנוכחי בצהוב
4. מוסיף click handlers לכל הקודקודים

---

## 🧪 איך לבדוק:

### 1. פתח פרופיל
http://localhost:8080/profiles/People/Dr-PETER-פנחס-HOFFMAN

### 2. הסתכל בפריים הימני
תראה:
- ✅ עץ משפחתי מלא עם **כל 21 האנשים**
- ✅ Dr. Peter מודגש ב**צהוב** 
- ✅ כל השמות **לחיצים**
- ✅ קשרי נישואין (קודקודים עגולים קטנים)

### 3. נסה את הפקדים
- **בחר דורות**: שנה ל-2, 4, או הכל
- **זום +**: הגדל את העץ
- **זום -**: הקטן את העץ
- **איפוס**: חזרה לגודל רגיל

### 4. לחץ על שם כלשהו בעץ
עובר לפרופיל שלו, והעץ מתעדכן עם ההדגשה החדשה!

---

## 📊 סטטיסטיקה:

- **אנשים בעץ**: 21 (כרגע, 546 בGEDCOM המלא)
- **משפחות**: 24
- **קישורים לחיצים**: 21
- **הדגשה**: פרופיל נוכחי בצהוב
- **פורמט**: Mermaid flowchart

---

## 🎨 עיצוב:

הפרופיל המודגש:
```scss
classDef selected fill:#ffeb3b,stroke:#f57f17,stroke-width:3px;
```

פרופילים רגילים:
```scss
classDef person fill:#e1f5fe,stroke:#0277bd,stroke-width:2px;
```

---

## ⏭️ שיפורים עתידיים (שבוע 5-6):

- ⏳ סינון לפי דורות (מהפרופיל הנבחר)
- ⏳ אנימציות מעבר
- ⏳ אופטימיזציה לעץ גדול (546 איש)
- ⏳ מיקוד אוטומטי על הפרופיל הנבחר

---

**תאריך**: אוקטובר 2025  
**גרסה**: 2.1  
**סטטוס**: ✅ עובד!

